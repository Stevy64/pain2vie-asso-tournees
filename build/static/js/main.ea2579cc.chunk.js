(this["webpackJsonpfirestore-crud"]=this["webpackJsonpfirestore-crud"]||[]).push([[0],{41:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(33),s=n.n(a),o=n(19),c=n(4),i=(n(40),n(41),n(20)),l=n(7),u=n(31),d=n(28);n(53);d.a.initializeApp({apiKey:"AIzaSyBsFqHJr-NR_FN-VbSF_AiJscIilQqM13g",authDomain:"pain2viedata.firebaseapp.com",databaseURL:"https://pain2viedata-default-rtdb.firebaseio.com",projectId:"pain2viedata",storageBucket:"pain2viedata.appspot.com",messagingSenderId:"21075538993",appId:"1:21075538993:web:0cea75167a53e3b2b1d110",measurementId:"G-6MYBBPZMVK"});var b=d.a.firestore().collection("/tournees"),j={getAll:function(){return b},create:function(e){return b.add(e)},update:function(e,t){return b.doc(e).update(t)},remove:function(e){return b.doc(e).delete()}},h=n(17),m=n.n(h),v=(n(32),n(1)),p=function(){var e={ville:"",date:"--",poids:"",total:0,benevoles:"",remarques:"",published:!1},t=Object(r.useState)(e),n=Object(u.a)(t,2),a=n[0],s=n[1],o=Object(r.useState)(!1),c=Object(u.a)(o,2),d=c[0],b=c[1],h=function(e){var t=e.target,n=t.name,r=t.value;s(Object(l.a)(Object(l.a)({},a),{},Object(i.a)({},n,r)))};return Object(v.jsx)("div",{className:"submit-form",children:d?Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{children:"Informations enr\xe9gistr\xe9es avec succ\xe8s!"}),Object(v.jsx)("button",{className:"btn btn-success",onClick:function(){s(e),b(!1)},children:"Ajouter"})]}):Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{htmlFor:"ville",children:"Ville"}),Object(v.jsx)("input",{type:"text",className:"form-control",id:"ville",required:!0,value:a.ville,onChange:h,name:"ville",placeholder:"Super U Mareil"})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{htmlFor:"poids",children:"Poids des bacs"}),Object(v.jsx)("input",{type:"text",className:"form-control",id:"poids",required:!0,value:a.poids,onChange:h,name:"poids",placeholder:"9.5 + 15 + 20.1"})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{htmlFor:"total",children:"Total"}),Object(v.jsx)("input",{type:"number",className:"form-control",id:"total",required:!0,value:a.total,onChange:h,name:"total"})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{htmlFor:"benevoles",children:"Noms des b\xe9n\xe9voles"}),Object(v.jsx)("input",{type:"text",className:"form-control",id:"benevoles",required:!0,value:a.benevoles,onChange:h,name:"benevoles"})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{htmlFor:"remarques",children:"Autres infos"}),Object(v.jsx)("textarea",{type:"text",className:"form-control",id:"remarques",required:!0,value:a.remarques,onChange:h,name:"remarques",rows:"3",placeholder:"ex: 1 bac laiss\xe9 \xe0 Mareil"})]}),Object(v.jsx)("button",{onClick:function(){var e={ville:a.ville,date:m()().format("dddd Do/MM/YY HH:mm"),poids:a.poids,total:a.total,benevoles:a.benevoles,remarques:a.remarques,published:!1};j.create(e).then((function(){b(!0)})).catch((function(e){console.log(e)}))},className:"btn btn-success",children:"Enregistrer"})]})})},O=n(21),x=n(22),f=n(9),g=n(24),T=n(23),N=function(e){Object(g.a)(n,e);var t=Object(T.a)(n);function n(e){var r;return Object(O.a)(this,n),(r=t.call(this,e)).onChangeVille=r.onChangeVille.bind(Object(f.a)(r)),r.onChangePoids=r.onChangePoids.bind(Object(f.a)(r)),r.onChangeTotal=r.onChangeTotal.bind(Object(f.a)(r)),r.onChangeRemarques=r.onChangeRemarques.bind(Object(f.a)(r)),r.onChangeBenevoles=r.onChangeBenevoles.bind(Object(f.a)(r)),r.updatePublished=r.updatePublished.bind(Object(f.a)(r)),r.updateTournee=r.updateTournee.bind(Object(f.a)(r)),r.deleteTournee=r.deleteTournee.bind(Object(f.a)(r)),r.state={currentTournee:{id:null,date:m()().format("dddd Do/MM/YYYY HH:mm"),ville:"",poids:"",total:0,benevoles:"",remarques:"",published:!1},message:""},r}return Object(x.a)(n,[{key:"componentDidMount",value:function(){this.setState({currentTournee:this.props.tournee})}},{key:"onChangeVille",value:function(e){var t=e.target.value;this.setState((function(e){return{currentTournee:Object(l.a)(Object(l.a)({},e.currentTournee),{},{ville:t})}}))}},{key:"onChangePoids",value:function(e){var t=e.target.value;this.setState((function(e){return{currentTournee:Object(l.a)(Object(l.a)({},e.currentTournee),{},{poids:t})}}))}},{key:"onChangeTotal",value:function(e){var t=e.target.value;this.setState((function(e){return{currentTournee:Object(l.a)(Object(l.a)({},e.currentTournee),{},{total:t})}}))}},{key:"onChangeRemarques",value:function(e){var t=e.target.value;this.setState((function(e){return{currentTournee:Object(l.a)(Object(l.a)({},e.currentTournee),{},{remarques:t})}}))}},{key:"onChangeBenevoles",value:function(e){var t=e.target.value;this.setState((function(e){return{currentTournee:Object(l.a)(Object(l.a)({},e.currentTournee),{},{benevoles:t})}}))}},{key:"updatePublished",value:function(e){var t=this;j.update(this.state.currentTournee.id,{published:e}).then((function(){t.setState((function(t){return{currentTournee:Object(l.a)(Object(l.a)({},t.currentTournee),{},{published:e}),message:"Veuillez enr\xe9gistrer vos modifications"}}))})).catch((function(e){console.log(e)}))}},{key:"updateTournee",value:function(){var e=this,t={ville:this.state.currentTournee.ville,poids:this.state.currentTournee.poids,total:this.state.currentTournee.total,remarques:this.state.currentTournee.remarques,benevoles:this.state.currentTournee.benevoles,date:this.state.currentTournee.date};j.update(this.state.currentTournee.id,t).then((function(){e.setState({message:"Veuillez enregistrer vos modifications"})})).catch((function(e){console.log(e)}))}},{key:"deleteTournee",value:function(){var e=this;j.remove(this.state.currentTournee.id).then((function(){e.props.refreshList()})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state.currentTournee;return Object(v.jsxs)("div",{children:[Object(v.jsxs)("h4",{children:["Tourn\xe9e du ",t.date]}),t?Object(v.jsxs)("div",{className:"edit-form",children:[Object(v.jsxs)("form",{children:[Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{htmlFor:"ville",children:"Ville"}),Object(v.jsx)("input",{type:"text",className:"form-control",id:"ville",value:t.ville,onChange:this.onChangeVille})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{htmlFor:"poids",children:"Poids"}),Object(v.jsx)("input",{type:"text",className:"form-control",id:"poids",value:t.poids,onChange:this.onChangePoids})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{htmlFor:"total",children:"Total"}),Object(v.jsx)("input",{type:"text",className:"form-control",id:"total",value:t.total,onChange:this.onChangeTotal})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{htmlFor:"benevoles",children:"Benevoles"}),Object(v.jsx)("input",{type:"text",className:"form-control",id:"benevoles",value:t.benevoles,onChange:this.onChangeBenevoles})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{htmlFor:"remarques",children:"Autres infos"}),Object(v.jsx)("input",{type:"text",className:"form-control",id:"remarques",value:t.remarques,onChange:this.onChangeRemarques})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{children:Object(v.jsx)("strong",{children:"Status :"})}),t.published?" En attente..":" Enregistr\xe9"]})]}),Object(v.jsxs)("div",{className:"btn-toolbar justify-content-between",role:"toolbar","aria-label":"Toolbar with button groups",children:[Object(v.jsxs)("div",{className:"btn-group",role:"group","aria-label":"First group",children:[Object(v.jsx)("button",{type:"button",className:"btn btn-secondary btn-danger",children:"o"}),Object(v.jsx)("button",{className:"btn btn-outline-danger",onClick:this.deleteTournee,children:"Supprimer"})]}),Object(v.jsxs)("div",{className:"btn-group",role:"group","aria-label":"Second group",children:[Object(v.jsx)("button",{type:"button",className:"btn btn-secondary btn-success",children:"o"}),t.published?Object(v.jsx)("button",{className:"btn btn-outline-success",onClick:function(){return e.updatePublished(!1)},children:"Enregistrer"}):Object(v.jsx)("button",{className:"btn btn-outline-primary",onClick:function(){return e.updatePublished(!0)&e.updateTournee()},children:"Modifier"})]})]}),Object(v.jsx)("p",{children:t.published?this.state.message:" Enregistr\xe9 !"})]}):Object(v.jsxs)("div",{children:[Object(v.jsx)("br",{}),Object(v.jsx)("p",{children:"Veuillez s\xe9lectionner un \xe9l\xe9ment de la liste..."})]})]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.tournee;return t.currentTournee.id!==n.id?{currentTournee:n,message:""}:t.currentTournee}}]),n}(r.Component),C=function(e){Object(g.a)(n,e);var t=Object(T.a)(n);function n(e){var r;return Object(O.a)(this,n),(r=t.call(this,e)).refreshList=r.refreshList.bind(Object(f.a)(r)),r.setActiveTournee=r.setActiveTournee.bind(Object(f.a)(r)),r.onDataChange=r.onDataChange.bind(Object(f.a)(r)),r.state={tournees:[],currentTournee:null,currentIndex:-1},r.unsubscribe=void 0,r}return Object(x.a)(n,[{key:"componentDidMount",value:function(){this.unsubscribe=j.getAll().orderBy("date","desc").onSnapshot(this.onDataChange)}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"onDataChange",value:function(e){var t=[];e.forEach((function(e){var n=e.id,r=e.data();t.push({id:n,ville:r.ville,date:r.date,poids:r.poids,total:r.total,benevoles:r.benevoles,remarques:r.remarques,published:r.published})})),this.setState({tournees:t})}},{key:"refreshList",value:function(){this.setState({currentTournee:null,currentIndex:-1})}},{key:"setActiveTournee",value:function(e,t){this.setState({currentTournee:e,currentIndex:t})}},{key:"render",value:function(){var e=this,t=this.state,n=t.tournees,r=t.currentTournee,a=t.currentIndex;return Object(v.jsxs)("div",{className:"list row",children:[Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("h4",{children:"Tourn\xe9es"}),Object(v.jsx)("ul",{className:"list-group",children:n&&n.map((function(t,n){return Object(v.jsxs)("li",{className:"list-group-item "+(n===a?"active":""),onClick:function(){return e.setActiveTournee(t,n)},children:[Object(v.jsx)("b",{children:t.date})," ",Object(v.jsx)("p",{children:t.ville})," ",Object(v.jsxs)("span",{className:"total",children:["Total : ",t.total," Kgs"]})]},n)}))})]}),Object(v.jsx)("div",{className:"col-md-6",children:r?Object(v.jsx)(N,{tournee:r,refreshList:this.refreshList}):Object(v.jsxs)("div",{children:[Object(v.jsx)("br",{}),Object(v.jsx)("p",{className:"lead",children:"Veuillez s\xe9lectionner un \xe9l\xe9ment de la liste ..."})]})})]})}}]),n}(r.Component);var y=function(){return Object(v.jsxs)("div",{children:[Object(v.jsxs)("nav",{className:"navbar navbar-expand fixed-top navbar-dark bg-dark",children:[Object(v.jsx)("a",{href:"/",className:"navbar-brand",children:"Pain2Vie"}),Object(v.jsxs)("div",{className:"navbar-nav mr-auto",children:[Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(o.b,{to:"/tournees",className:"nav-link",children:"LISTE"})}),Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(o.b,{to:"/ajouter",className:"nav-link",children:"AJOUTER"})})]})]}),Object(v.jsxs)("div",{className:"container mt-4 lead",children:[Object(v.jsx)("span",{className:"pain2vie-title",children:Object(v.jsx)("h2",{children:"Association Pain2Vie Le Mans"})}),Object(v.jsxs)(c.c,{children:[Object(v.jsx)(c.a,{exact:!0,path:["/","/tournees"],component:C}),Object(v.jsx)(c.a,{exact:!0,path:"/ajouter",component:p})]})]})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(v.jsx)(o.a,{children:Object(v.jsx)(y,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[52,1,2]]]);
//# sourceMappingURL=main.ea2579cc.chunk.js.map